"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/signin";
exports.ids = ["pages/api/signin"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./library/mongodb.ts":
/*!****************************!*\
  !*** ./library/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EmailExist\": () => (/* binding */ EmailExist),\n/* harmony export */   \"findMatchUsers\": () => (/* binding */ findMatchUsers),\n/* harmony export */   \"insertDetail\": () => (/* binding */ insertDetail),\n/* harmony export */   \"insertLogIn\": () => (/* binding */ insertLogIn),\n/* harmony export */   \"insertMatch\": () => (/* binding */ insertMatch),\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser),\n/* harmony export */   \"verifyPassword\": () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nvar sha512 = function(password, salt) {\n    var hash = crypto.createHmac(\"sha512\", salt); /** Hashing algorithm sha512 */ \n    hash.update(password);\n    var value = hash.digest(\"hex\");\n    return {\n        salt: salt,\n        passwordHash: value\n    };\n};\nfunction hashPassword(password) {\n    const salt2 = crypto.randomBytes(128).toString(\"base64\");\n    const { salt , passwordHash  } = sha512(password, salt2);\n    return {\n        salt: salt,\n        passwordHash: passwordHash\n    };\n}\nconst DB = \"test\";\nconst DETAIL = \"Details\";\nconst MATCH = \"Match\";\nconst USER = \"Users\";\nconst LOGIN = \"Login\";\nconst URL = \"mongodb://localhost:27017/\";\nconst insertUser = async (user)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const userCollection = client.db(DB).collection(USER);\n    try {\n        result = await userCollection.insertOne(user);\n    } catch (e) {\n        console.log(e);\n        result = null;\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertDetail = async (id, detail)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const detailCollection = client.db(DB).collection(DETAIL);\n    try {\n        result = await detailCollection.insertOne({\n            _id: id,\n            content: detail\n        });\n    } catch (e) {\n        console.log(e);\n        result = \"\";\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertLogIn = async (email, pw)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const detailCollection = client.db(DB).collection(LOGIN);\n    const { salt , passwordHash  } = hashPassword(pw);\n    try {\n        result = await detailCollection.insertOne({\n            email: email,\n            passwordHash: passwordHash,\n            salt: salt\n        });\n    } catch (e) {\n        console.log(e);\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertMatch = async (id, array)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const matchCollection = client.db(DB).collection(MATCH);\n    try {\n        result = await matchCollection.insertOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id),\n            match: array\n        });\n    } catch (e) {\n        console.log(e);\n        result = null;\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst findMatchUsers = async (id)=>{\n    console.log(\"findMatchUsers Exec\");\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const matchCollection = client.db(DB).collection(MATCH);\n    const detailCollection = client.db(DB).collection(DETAIL);\n    let users = [];\n    try {\n        const result = await matchCollection.findOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n        });\n        await detailCollection.find({\n            _id: result\n        }).forEach((e)=>{\n            users.push(e);\n        });\n    } catch (e) {\n        users.push(\"Data Not Found\");\n    } finally{\n        await client.close();\n        return users;\n    }\n};\nconst EmailExist = async (email)=>{\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const loginCollection = client.db(DB).collection(LOGIN);\n    const result = await loginCollection.findOne({\n        email: email\n    });\n    console.log(result);\n    if (result) return true;\n    else return false;\n};\nconst verifyPassword = async (email, password)=>{\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const loginCollection = client.db(DB).collection(LOGIN);\n    const result = await loginCollection.findOne({\n        email: email\n    });\n    const input = sha512(password, result?.salt).passwordHash;\n    const actual = result?.passwordHash;\n    if (input == actual) {\n        return result?._id.toString();\n    }\n    return \"wrong\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sSUFBSTtTQUVYLE9BQU8sS0FBSztBQUNsQixFQUFFO0FBRUssTUFBTStCLGlCQUFpQixPQUFPZCxPQUFjckMsV0FBb0I7SUFDckUsTUFBTXFCLFNBQVMsSUFBSTFCLGdEQUFXQSxDQUFDc0I7SUFDL0IsTUFBTWlDLGtCQUFrQjdCLE9BQU9FLEVBQUUsQ0FBQ1gsSUFBSVksVUFBVSxDQUFDUjtJQUNqRCxNQUFNSSxTQUFTLE1BQU04QixnQkFBZ0JMLE9BQU8sQ0FBQztRQUFFUixPQUFPQTtJQUFNO0lBRTVELE1BQU1lLFFBQVFyRCxPQUFPQyxVQUFTb0IsUUFBUW5CLE1BQU1NLFlBQVk7SUFDeEQsTUFBTThDLFNBQVNqQyxRQUFRYjtJQUV2QixJQUFJNkMsU0FBU0MsUUFBUTtRQUVuQixPQUFPakMsUUFBUWMsSUFBSXZCLFFBQVE7SUFDN0IsQ0FBQztJQUdELE9BQU87QUFFVCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGV0ZmluZGVyLy4vbGlicmFyeS9tb25nb2RiLnRzPzA1MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cblxudmFyIHNoYTUxMiA9IGZ1bmN0aW9uKHBhc3N3b3JkOnN0cmluZywgc2FsdDpzdHJpbmcpe1xuICB2YXIgaGFzaCA9IGNyeXB0by5jcmVhdGVIbWFjKCdzaGE1MTInLCBzYWx0KTsgLyoqIEhhc2hpbmcgYWxnb3JpdGhtIHNoYTUxMiAqL1xuICBoYXNoLnVwZGF0ZShwYXNzd29yZCk7XG4gIHZhciB2YWx1ZSA9IGhhc2guZGlnZXN0KCdoZXgnKTtcbiAgcmV0dXJuIHtcbiAgc2FsdDpzYWx0LFxuICBwYXNzd29yZEhhc2g6dmFsdWVcbiAgfTtcbiAgfTtcbiAgXG5cbmZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKSB7XG4gIGNvbnN0IHNhbHQyPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTI4KS50b1N0cmluZygnYmFzZTY0Jyk7XG5cbiAgY29uc3Qge3NhbHQsIHBhc3N3b3JkSGFzaH0gPSBzaGE1MTIocGFzc3dvcmQsIHNhbHQyKTtcblxuICByZXR1cm4ge1xuICAgICAgc2FsdDogc2FsdCxcbiAgICAgIHBhc3N3b3JkSGFzaDogcGFzc3dvcmRIYXNoLFxuICB9O1xufVxuXG5jb25zdCBEQiA9IFwidGVzdFwiO1xuY29uc3QgREVUQUlMID0gXCJEZXRhaWxzXCI7XG5jb25zdCBNQVRDSCA9IFwiTWF0Y2hcIjtcbmNvbnN0IFVTRVIgPSBcIlVzZXJzXCI7XG5jb25zdCBMT0dJTiA9IFwiTG9naW5cIjtcbmNvbnN0IFVSTCA9IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9cIjtcblxuZXhwb3J0IGNvbnN0IGluc2VydFVzZXIgPSBhc3luYyAodXNlcjogYW55KSA9PiB7XG4gIGxldCByZXN1bHQ7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCB1c2VyQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihVU0VSKTtcbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBhd2FpdCB1c2VyQ29sbGVjdGlvbi5pbnNlcnRPbmUodXNlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICByZXN1bHQgPSBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGNsaWVudC5jbG9zZSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbnNlcnREZXRhaWwgPSBhc3luYyAoaWQgOiBhbnksIGRldGFpbCA6IGFueSkgPT4ge1xuICBsZXQgcmVzdWx0O1xuICBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQoVVJMKTtcbiAgY29uc3QgZGV0YWlsQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihERVRBSUwpO1xuXG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gYXdhaXQgZGV0YWlsQ29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgX2lkIDogaWQsXG4gICAgICBjb250ZW50IDogZGV0YWlsXG4gICAgfSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIHJlc3VsdCA9IFwiXCI7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5zZXJ0TG9nSW4gPSBhc3luYyAoZW1haWwgOiBhbnksIHB3IDogYW55KSA9PiB7XG4gIGxldCByZXN1bHQ7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBkZXRhaWxDb2xsZWN0aW9uID0gY2xpZW50LmRiKERCKS5jb2xsZWN0aW9uKExPR0lOKTtcbiAgY29uc3Qge3NhbHQsIHBhc3N3b3JkSGFzaH0gPSBoYXNoUGFzc3dvcmQocHcpO1xuICB0cnkge1xuICAgIHJlc3VsdCA9IGF3YWl0IGRldGFpbENvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIGVtYWlsIDogZW1haWwsXG4gICAgICBwYXNzd29yZEhhc2ggOiBwYXNzd29yZEhhc2gsXG4gICAgICBzYWx0IDogc2FsdFxuICAgIH0pXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBjbGllbnQuY2xvc2UoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRNYXRjaCA9IGFzeW5jIChpZDogYW55LCBhcnJheTogc3RyaW5nW10pID0+IHtcbiAgbGV0IHJlc3VsdDtcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KFVSTCk7XG4gIGNvbnN0IG1hdGNoQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihNQVRDSCk7XG4gIHRyeSB7XG5cbiAgICByZXN1bHQgPSBhd2FpdCBtYXRjaENvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIF9pZDogbmV3IE9iamVjdElkKGlkKSxcbiAgICAgIG1hdGNoOiBhcnJheSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIHJlc3VsdCA9IG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRNYXRjaFVzZXJzID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgY29uc29sZS5sb2coXCJmaW5kTWF0Y2hVc2VycyBFeGVjXCIpXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBtYXRjaENvbGxlY3Rpb24gPSBjbGllbnQuZGIoREIpLmNvbGxlY3Rpb24oTUFUQ0gpO1xuICBjb25zdCBkZXRhaWxDb2xsZWN0aW9uID0gY2xpZW50LmRiKERCKS5jb2xsZWN0aW9uKERFVEFJTCk7XG4gIGxldCB1c2VycyA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoQ29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuICAgICBhd2FpdCBkZXRhaWxDb2xsZWN0aW9uLmZpbmQoe19pZDogcmVzdWx0fSkuZm9yRWFjaCgoZTphbnkpID0+IHtcbiAgICAgIHVzZXJzLnB1c2goZSlcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHVzZXJzLnB1c2goXCJEYXRhIE5vdCBGb3VuZFwiKSA7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHVzZXJzO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgRW1haWxFeGlzdCA9IGFzeW5jIChlbWFpbDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBsb2dpbkNvbGxlY3Rpb24gPSBjbGllbnQuZGIoREIpLmNvbGxlY3Rpb24oTE9HSU4pO1xuICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2dpbkNvbGxlY3Rpb24uZmluZE9uZSh7IGVtYWlsOiBlbWFpbCB9KTtcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgaWYgKHJlc3VsdClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGZhbHNlXG59O1xuXG5leHBvcnQgY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBhc3luYyAoZW1haWw6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KFVSTCk7XG4gIGNvbnN0IGxvZ2luQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihMT0dJTik7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvZ2luQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xuXG4gIGNvbnN0IGlucHV0ID0gc2hhNTEyKHBhc3N3b3JkLHJlc3VsdD8uc2FsdCkucGFzc3dvcmRIYXNoXG4gIGNvbnN0IGFjdHVhbCA9IHJlc3VsdD8ucGFzc3dvcmRIYXNoXG5cbiAgaWYgKGlucHV0ID09IGFjdHVhbCkge1xuXG4gICAgcmV0dXJuIHJlc3VsdD8uX2lkLnRvU3RyaW5nKClcbiAgfVxuICAgIFxuICBcbiAgcmV0dXJuIFwid3JvbmdcIlxuICAgXG59Il0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiT2JqZWN0SWQiLCJjcnlwdG8iLCJyZXF1aXJlIiwic2hhNTEyIiwicGFzc3dvcmQiLCJzYWx0IiwiaGFzaCIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJ2YWx1ZSIsImRpZ2VzdCIsInBhc3N3b3JkSGFzaCIsImhhc2hQYXNzd29yZCIsInNhbHQyIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsIkRCIiwiREVUQUlMIiwiTUFUQ0giLCJVU0VSIiwiTE9HSU4iLCJVUkwiLCJpbnNlcnRVc2VyIiwidXNlciIsInJlc3VsdCIsImNsaWVudCIsInVzZXJDb2xsZWN0aW9uIiwiZGIiLCJjb2xsZWN0aW9uIiwiaW5zZXJ0T25lIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJjbG9zZSIsImluc2VydERldGFpbCIsImlkIiwiZGV0YWlsIiwiZGV0YWlsQ29sbGVjdGlvbiIsIl9pZCIsImNvbnRlbnQiLCJpbnNlcnRMb2dJbiIsImVtYWlsIiwicHciLCJpbnNlcnRNYXRjaCIsImFycmF5IiwibWF0Y2hDb2xsZWN0aW9uIiwibWF0Y2giLCJmaW5kTWF0Y2hVc2VycyIsInVzZXJzIiwiZmluZE9uZSIsImZpbmQiLCJmb3JFYWNoIiwicHVzaCIsIkVtYWlsRXhpc3QiLCJsb2dpbkNvbGxlY3Rpb24iLCJ2ZXJpZnlQYXNzd29yZCIsImlucHV0IiwiYWN0dWFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./library/mongodb.ts\n");

/***/ }),

/***/ "(api)/./middleware/requireAuth.ts":
/*!***********************************!*\
  !*** ./middleware/requireAuth.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ requireAuth)\n/* harmony export */ });\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\nfunction requireAuth(req, res, next) {\n    if (req.cookies.token) {\n        //console.log('hi')   \n        var decoded = jwt.verify(req.cookies.token, \"This is a Secret Key\");\n        if (req.method == \"GET\") {\n            return res.json({\n                data: decoded.id\n            });\n        }\n        req.idd = decoded.id;\n    }\n    next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL3JlcXVpcmVBdXRoLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxNQUFNQyxtQkFBT0EsQ0FBQztBQUtMLFNBQVNDLFlBQWFDLEdBQU8sRUFBRUMsR0FBbUIsRUFBRUMsSUFBUSxFQUFFO0lBRXpFLElBQUdGLElBQUlHLE9BQU8sQ0FBQ0MsS0FBSyxFQUFFO1FBQ2xCLHNCQUFzQjtRQUN0QixJQUFJQyxVQUFVUixJQUFJUyxNQUFNLENBQUNOLElBQUlHLE9BQU8sQ0FBQ0MsS0FBSyxFQUFFO1FBQzVDLElBQUlKLElBQUlPLE1BQU0sSUFBSSxPQUFPO1lBQ3JCLE9BQU9OLElBQUlPLElBQUksQ0FBQztnQkFBQ0MsTUFBS0osUUFBUUssRUFBRTtZQUFBO1FBQ3BDLENBQUM7UUFDRFYsSUFBSVcsR0FBRyxHQUFHTixRQUFRSyxFQUFFO0lBQ3hCLENBQUM7SUFFRFI7QUFDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGV0ZmluZGVyLy4vbWlkZGxld2FyZS9yZXF1aXJlQXV0aC50cz9lZGM1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuaW1wb3J0IG5jIGZyb20gXCJuZXh0LWNvbm5lY3RcIjtcblxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVBdXRoIChyZXE6YW55LCByZXM6TmV4dEFwaVJlc3BvbnNlLCBuZXh0OmFueSkge1xuICAgIFxuICAgIGlmKHJlcS5jb29raWVzLnRva2VuKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2hpJykgICBcbiAgICAgICAgdmFyIGRlY29kZWQgPSBqd3QudmVyaWZ5KHJlcS5jb29raWVzLnRva2VuLCAnVGhpcyBpcyBhIFNlY3JldCBLZXknKTtcbiAgICAgICAgaWYgKHJlcS5tZXRob2QgPT0gJ0dFVCcpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7ZGF0YTpkZWNvZGVkLmlkfSlcbiAgICAgICAgfVxuICAgICAgICByZXEuaWRkID0gZGVjb2RlZC5pZFxuICAgIH1cbiAgICBcbiAgICBuZXh0KCk7XG59Il0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJyZXF1aXJlQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJjb29raWVzIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwibWV0aG9kIiwianNvbiIsImRhdGEiLCJpZCIsImlkZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./middleware/requireAuth.ts\n");

/***/ }),

/***/ "(api)/./pages/api/signin.ts":
/*!*****************************!*\
  !*** ./pages/api/signin.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var _library_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../library/mongodb */ \"(api)/./library/mongodb.ts\");\n/* harmony import */ var _middleware_requireAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../middleware/requireAuth */ \"(api)/./middleware/requireAuth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__]);\nnext_connect__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n\n\n\nconst handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    onError: (err, req, res, next)=>{\n        console.error(err.stack);\n        res.status(500).end(\"Something broke!\");\n    },\n    onNoMatch: (req, res)=>{\n        res.status(404).end(\"Page is not found\");\n    }\n}).use(_middleware_requireAuth__WEBPACK_IMPORTED_MODULE_2__[\"default\"]).post((req, res)=>{\n    const { email , password  } = JSON.parse(req.body);\n    console.log(\"api/signin  mehotd : post\");\n    (0,_library_mongodb__WEBPACK_IMPORTED_MODULE_1__.verifyPassword)(email, password).then((result)=>{\n        if (result == \"wrong\") return res.json({\n            data: \"wrong password\"\n        });\n        const id = result;\n        const token = jwt.sign({\n            id\n        }, \"This is a Secret Key\");\n        const max_age = 60 * 60 * 3; // 3 hrs\n        const domain = \"localhost\";\n        const path = \"/\";\n        res.setHeader(`Set-Cookie`, `token=${token};Max-Age=${max_age};Domain=${domain};Path=${path}`);\n        return res.json({\n            data: \"success\"\n        });\n    });\n}).get((req, res)=>{\n    res.send(\"hi\");\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2lnbmluLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFNQSxNQUFNQyxtQkFBT0EsQ0FBQyxrQ0FBYztBQUNKO0FBRXNDO0FBQ2I7QUFFdkQsTUFBTUksVUFBVUgsd0RBQUVBLENBQWtDO0lBQ2xESSxTQUFTLENBQUNDLEtBQUtDLEtBQUtDLEtBQUtDLE9BQVM7UUFDaENDLFFBQVFDLEtBQUssQ0FBQ0wsSUFBSU0sS0FBSztRQUN2QkosSUFBSUssTUFBTSxDQUFDLEtBQUtDLEdBQUcsQ0FBQztJQUN0QjtJQUNBQyxXQUFXLENBQUNSLEtBQUtDLE1BQVE7UUFDdkJBLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUM7SUFDdEI7QUFDRixHQUNHRSxHQUFHLENBQUNiLCtEQUFXQSxFQUNmYyxJQUFJLENBQUMsQ0FBQ1YsS0FBS0MsTUFBUTtJQUNsQixNQUFNLEVBQUVVLE1BQUssRUFBRUMsU0FBUSxFQUFFLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ2QsSUFBSWUsSUFBSTtJQUUvQ1osUUFBUWEsR0FBRyxDQUFDO0lBRVpyQixnRUFBY0EsQ0FBQ2dCLE9BQU9DLFVBQVVLLElBQUksQ0FBQyxDQUFDQyxTQUFXO1FBQy9DLElBQUlBLFVBQVUsU0FBUyxPQUFPakIsSUFBSWtCLElBQUksQ0FBQztZQUFFQyxNQUFNO1FBQWlCO1FBRWhFLE1BQU1DLEtBQUtIO1FBQ1gsTUFBTUksUUFBUTlCLElBQUkrQixJQUFJLENBQUM7WUFBRUY7UUFBRyxHQUFHO1FBQy9CLE1BQU1HLFVBQVUsS0FBSyxLQUFLLEdBQUcsUUFBUTtRQUNyQyxNQUFNQyxTQUFTO1FBQ2YsTUFBTUMsT0FBTztRQUViekIsSUFBSTBCLFNBQVMsQ0FDWCxDQUFDLFVBQVUsQ0FBQyxFQUNaLENBQUMsTUFBTSxFQUFFTCxNQUFNLFNBQVMsRUFBRUUsUUFBUSxRQUFRLEVBQUVDLE9BQU8sTUFBTSxFQUFFQyxLQUFLLENBQUM7UUFHbkUsT0FBT3pCLElBQUlrQixJQUFJLENBQUM7WUFBQ0MsTUFBSztRQUFTO0lBQ2pDO0FBQ0YsR0FDQ1EsR0FBRyxDQUFDLENBQUM1QixLQUFLQyxNQUFRO0lBQ2pCQSxJQUFJNEIsSUFBSSxDQUFDO0FBQ1g7QUFFRixpRUFBZWhDLE9BQU9BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZXRmaW5kZXIvLi9wYWdlcy9hcGkvc2lnbmluLnRzPzJhNDgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcbmltcG9ydCBuYyBmcm9tIFwibmV4dC1jb25uZWN0XCI7XG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvdHlwZXNcIjtcbmltcG9ydCB7IGluc2VydExvZ0luLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuLi8uLi9saWJyYXJ5L21vbmdvZGJcIjtcbmltcG9ydCByZXF1aXJlQXV0aCBmcm9tIFwiLi4vLi4vbWlkZGxld2FyZS9yZXF1aXJlQXV0aFwiO1xuXG5jb25zdCBoYW5kbGVyID0gbmM8TmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZT4oe1xuICBvbkVycm9yOiAoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuZW5kKFwiU29tZXRoaW5nIGJyb2tlIVwiKTtcbiAgfSxcbiAgb25Ob01hdGNoOiAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc3RhdHVzKDQwNCkuZW5kKFwiUGFnZSBpcyBub3QgZm91bmRcIik7XG4gIH0sXG59KVxuICAudXNlKHJlcXVpcmVBdXRoKVxuICAucG9zdCgocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gSlNPTi5wYXJzZShyZXEuYm9keSk7XG5cbiAgICBjb25zb2xlLmxvZygnYXBpL3NpZ25pbiAgbWVob3RkIDogcG9zdCcpXG5cbiAgICB2ZXJpZnlQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdCA9PSBcIndyb25nXCIpIHJldHVybiByZXMuanNvbih7IGRhdGE6IFwid3JvbmcgcGFzc3dvcmRcIiB9KTtcblxuICAgICAgY29uc3QgaWQgPSByZXN1bHQ7XG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQgfSwgXCJUaGlzIGlzIGEgU2VjcmV0IEtleVwiKTtcbiAgICAgIGNvbnN0IG1heF9hZ2UgPSA2MCAqIDYwICogMzsgLy8gMyBocnNcbiAgICAgIGNvbnN0IGRvbWFpbiA9IFwibG9jYWxob3N0XCI7XG4gICAgICBjb25zdCBwYXRoID0gXCIvXCI7XG5cbiAgICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgIGBTZXQtQ29va2llYCxcbiAgICAgICAgYHRva2VuPSR7dG9rZW59O01heC1BZ2U9JHttYXhfYWdlfTtEb21haW49JHtkb21haW59O1BhdGg9JHtwYXRofWBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiByZXMuanNvbih7ZGF0YTpcInN1Y2Nlc3NcIn0pO1xuICAgIH0pO1xuICB9KVxuICAuZ2V0KChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5zZW5kKFwiaGlcIik7XG4gIH0pO1xuXG5leHBvcnQgZGVmYXVsdCBoYW5kbGVyO1xuIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJuYyIsInZlcmlmeVBhc3N3b3JkIiwicmVxdWlyZUF1dGgiLCJoYW5kbGVyIiwib25FcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsInN0YXR1cyIsImVuZCIsIm9uTm9NYXRjaCIsInVzZSIsInBvc3QiLCJlbWFpbCIsInBhc3N3b3JkIiwiSlNPTiIsInBhcnNlIiwiYm9keSIsImxvZyIsInRoZW4iLCJyZXN1bHQiLCJqc29uIiwiZGF0YSIsImlkIiwidG9rZW4iLCJzaWduIiwibWF4X2FnZSIsImRvbWFpbiIsInBhdGgiLCJzZXRIZWFkZXIiLCJnZXQiLCJzZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/signin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/signin.ts"));
module.exports = __webpack_exports__;

})();