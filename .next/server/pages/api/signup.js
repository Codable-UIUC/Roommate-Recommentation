"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/signup";
exports.ids = ["pages/api/signup"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./library/mongodb.ts":
/*!****************************!*\
  !*** ./library/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EmailExist\": () => (/* binding */ EmailExist),\n/* harmony export */   \"findMatchUsers\": () => (/* binding */ findMatchUsers),\n/* harmony export */   \"insertDetail\": () => (/* binding */ insertDetail),\n/* harmony export */   \"insertLogIn\": () => (/* binding */ insertLogIn),\n/* harmony export */   \"insertMatch\": () => (/* binding */ insertMatch),\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser),\n/* harmony export */   \"verifyPassword\": () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nvar sha512 = function(password, salt) {\n    var hash = crypto.createHmac(\"sha512\", salt); /** Hashing algorithm sha512 */ \n    hash.update(password);\n    var value = hash.digest(\"hex\");\n    return {\n        salt: salt,\n        passwordHash: value\n    };\n};\nfunction hashPassword(password) {\n    const salt2 = crypto.randomBytes(128).toString(\"base64\");\n    const { salt , passwordHash  } = sha512(password, salt2);\n    return {\n        salt: salt,\n        passwordHash: passwordHash\n    };\n}\nconst DB = \"test\";\nconst DETAIL = \"Details\";\nconst MATCH = \"Match\";\nconst USER = \"Users\";\nconst LOGIN = \"Login\";\nconst URL = \"mongodb://localhost:27017/\";\nconst insertUser = async (user)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const userCollection = client.db(DB).collection(USER);\n    try {\n        result = await userCollection.insertOne(user);\n    } catch (e) {\n        console.log(e);\n        result = null;\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertDetail = async (id, detail)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const detailCollection = client.db(DB).collection(DETAIL);\n    try {\n        result = await detailCollection.insertOne({\n            _id: id,\n            content: detail\n        });\n    } catch (e) {\n        console.log(e);\n        result = \"\";\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertLogIn = async (email, pw)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const detailCollection = client.db(DB).collection(LOGIN);\n    const { salt , passwordHash  } = hashPassword(pw);\n    try {\n        result = await detailCollection.insertOne({\n            email: email,\n            passwordHash: passwordHash,\n            salt: salt\n        });\n    } catch (e) {\n        console.log(e);\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst insertMatch = async (id, array)=>{\n    let result;\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const matchCollection = client.db(DB).collection(MATCH);\n    try {\n        result = await matchCollection.insertOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id),\n            match: array\n        });\n    } catch (e) {\n        console.log(e);\n        result = null;\n    } finally{\n        await client.close();\n        return result;\n    }\n};\nconst findMatchUsers = async (id)=>{\n    console.log(\"findMatchUsers Exec\");\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const matchCollection = client.db(DB).collection(MATCH);\n    const detailCollection = client.db(DB).collection(DETAIL);\n    let users = [];\n    try {\n        const result = await matchCollection.findOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n        });\n        await detailCollection.find({\n            _id: result\n        }).forEach((e)=>{\n            users.push(e);\n        });\n    } catch (e) {\n        users.push(\"Data Not Found\");\n    } finally{\n        await client.close();\n        return users;\n    }\n};\nconst EmailExist = async (email)=>{\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const loginCollection = client.db(DB).collection(LOGIN);\n    const result = await loginCollection.findOne({\n        email: email\n    });\n    console.log(result);\n    if (result) return true;\n    else return false;\n};\nconst verifyPassword = async (email, password)=>{\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(URL);\n    const loginCollection = client.db(DB).collection(LOGIN);\n    const result = await loginCollection.findOne({\n        email: email\n    });\n    const input = sha512(password, result?.salt).passwordHash;\n    const actual = result?.passwordHash;\n    if (input == actual) {\n        return result?._id.toString();\n    }\n    return \"wrong\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sSUFBSTtTQUVYLE9BQU8sS0FBSztBQUNsQixFQUFFO0FBRUssTUFBTStCLGlCQUFpQixPQUFPZCxPQUFjckMsV0FBb0I7SUFDckUsTUFBTXFCLFNBQVMsSUFBSTFCLGdEQUFXQSxDQUFDc0I7SUFDL0IsTUFBTWlDLGtCQUFrQjdCLE9BQU9FLEVBQUUsQ0FBQ1gsSUFBSVksVUFBVSxDQUFDUjtJQUNqRCxNQUFNSSxTQUFTLE1BQU04QixnQkFBZ0JMLE9BQU8sQ0FBQztRQUFFUixPQUFPQTtJQUFNO0lBRTVELE1BQU1lLFFBQVFyRCxPQUFPQyxVQUFTb0IsUUFBUW5CLE1BQU1NLFlBQVk7SUFDeEQsTUFBTThDLFNBQVNqQyxRQUFRYjtJQUV2QixJQUFJNkMsU0FBU0MsUUFBUTtRQUVuQixPQUFPakMsUUFBUWMsSUFBSXZCLFFBQVE7SUFDN0IsQ0FBQztJQUdELE9BQU87QUFFVCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGV0ZmluZGVyLy4vbGlicmFyeS9tb25nb2RiLnRzPzA1MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cblxudmFyIHNoYTUxMiA9IGZ1bmN0aW9uKHBhc3N3b3JkOnN0cmluZywgc2FsdDpzdHJpbmcpe1xuICB2YXIgaGFzaCA9IGNyeXB0by5jcmVhdGVIbWFjKCdzaGE1MTInLCBzYWx0KTsgLyoqIEhhc2hpbmcgYWxnb3JpdGhtIHNoYTUxMiAqL1xuICBoYXNoLnVwZGF0ZShwYXNzd29yZCk7XG4gIHZhciB2YWx1ZSA9IGhhc2guZGlnZXN0KCdoZXgnKTtcbiAgcmV0dXJuIHtcbiAgc2FsdDpzYWx0LFxuICBwYXNzd29yZEhhc2g6dmFsdWVcbiAgfTtcbiAgfTtcbiAgXG5cbmZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKSB7XG4gIGNvbnN0IHNhbHQyPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTI4KS50b1N0cmluZygnYmFzZTY0Jyk7XG5cbiAgY29uc3Qge3NhbHQsIHBhc3N3b3JkSGFzaH0gPSBzaGE1MTIocGFzc3dvcmQsIHNhbHQyKTtcblxuICByZXR1cm4ge1xuICAgICAgc2FsdDogc2FsdCxcbiAgICAgIHBhc3N3b3JkSGFzaDogcGFzc3dvcmRIYXNoLFxuICB9O1xufVxuXG5jb25zdCBEQiA9IFwidGVzdFwiO1xuY29uc3QgREVUQUlMID0gXCJEZXRhaWxzXCI7XG5jb25zdCBNQVRDSCA9IFwiTWF0Y2hcIjtcbmNvbnN0IFVTRVIgPSBcIlVzZXJzXCI7XG5jb25zdCBMT0dJTiA9IFwiTG9naW5cIjtcbmNvbnN0IFVSTCA9IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9cIjtcblxuZXhwb3J0IGNvbnN0IGluc2VydFVzZXIgPSBhc3luYyAodXNlcjogYW55KSA9PiB7XG4gIGxldCByZXN1bHQ7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCB1c2VyQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihVU0VSKTtcbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBhd2FpdCB1c2VyQ29sbGVjdGlvbi5pbnNlcnRPbmUodXNlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICByZXN1bHQgPSBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGNsaWVudC5jbG9zZSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbnNlcnREZXRhaWwgPSBhc3luYyAoaWQgOiBhbnksIGRldGFpbCA6IGFueSkgPT4ge1xuICBsZXQgcmVzdWx0O1xuICBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQoVVJMKTtcbiAgY29uc3QgZGV0YWlsQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihERVRBSUwpO1xuXG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gYXdhaXQgZGV0YWlsQ29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgX2lkIDogaWQsXG4gICAgICBjb250ZW50IDogZGV0YWlsXG4gICAgfSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIHJlc3VsdCA9IFwiXCI7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5zZXJ0TG9nSW4gPSBhc3luYyAoZW1haWwgOiBhbnksIHB3IDogYW55KSA9PiB7XG4gIGxldCByZXN1bHQ7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBkZXRhaWxDb2xsZWN0aW9uID0gY2xpZW50LmRiKERCKS5jb2xsZWN0aW9uKExPR0lOKTtcbiAgY29uc3Qge3NhbHQsIHBhc3N3b3JkSGFzaH0gPSBoYXNoUGFzc3dvcmQocHcpO1xuICB0cnkge1xuICAgIHJlc3VsdCA9IGF3YWl0IGRldGFpbENvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIGVtYWlsIDogZW1haWwsXG4gICAgICBwYXNzd29yZEhhc2ggOiBwYXNzd29yZEhhc2gsXG4gICAgICBzYWx0IDogc2FsdFxuICAgIH0pXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBjbGllbnQuY2xvc2UoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRNYXRjaCA9IGFzeW5jIChpZDogYW55LCBhcnJheTogc3RyaW5nW10pID0+IHtcbiAgbGV0IHJlc3VsdDtcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KFVSTCk7XG4gIGNvbnN0IG1hdGNoQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihNQVRDSCk7XG4gIHRyeSB7XG5cbiAgICByZXN1bHQgPSBhd2FpdCBtYXRjaENvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIF9pZDogbmV3IE9iamVjdElkKGlkKSxcbiAgICAgIG1hdGNoOiBhcnJheSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIHJlc3VsdCA9IG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRNYXRjaFVzZXJzID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgY29uc29sZS5sb2coXCJmaW5kTWF0Y2hVc2VycyBFeGVjXCIpXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBtYXRjaENvbGxlY3Rpb24gPSBjbGllbnQuZGIoREIpLmNvbGxlY3Rpb24oTUFUQ0gpO1xuICBjb25zdCBkZXRhaWxDb2xsZWN0aW9uID0gY2xpZW50LmRiKERCKS5jb2xsZWN0aW9uKERFVEFJTCk7XG4gIGxldCB1c2VycyA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoQ29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuICAgICBhd2FpdCBkZXRhaWxDb2xsZWN0aW9uLmZpbmQoe19pZDogcmVzdWx0fSkuZm9yRWFjaCgoZTphbnkpID0+IHtcbiAgICAgIHVzZXJzLnB1c2goZSlcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHVzZXJzLnB1c2goXCJEYXRhIE5vdCBGb3VuZFwiKSA7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgcmV0dXJuIHVzZXJzO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgRW1haWxFeGlzdCA9IGFzeW5jIChlbWFpbDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwpO1xuICBjb25zdCBsb2dpbkNvbGxlY3Rpb24gPSBjbGllbnQuZGIoREIpLmNvbGxlY3Rpb24oTE9HSU4pO1xuICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2dpbkNvbGxlY3Rpb24uZmluZE9uZSh7IGVtYWlsOiBlbWFpbCB9KTtcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgaWYgKHJlc3VsdClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGZhbHNlXG59O1xuXG5leHBvcnQgY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBhc3luYyAoZW1haWw6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KFVSTCk7XG4gIGNvbnN0IGxvZ2luQ29sbGVjdGlvbiA9IGNsaWVudC5kYihEQikuY29sbGVjdGlvbihMT0dJTik7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvZ2luQ29sbGVjdGlvbi5maW5kT25lKHsgZW1haWw6IGVtYWlsIH0pO1xuXG4gIGNvbnN0IGlucHV0ID0gc2hhNTEyKHBhc3N3b3JkLHJlc3VsdD8uc2FsdCkucGFzc3dvcmRIYXNoXG4gIGNvbnN0IGFjdHVhbCA9IHJlc3VsdD8ucGFzc3dvcmRIYXNoXG5cbiAgaWYgKGlucHV0ID09IGFjdHVhbCkge1xuXG4gICAgcmV0dXJuIHJlc3VsdD8uX2lkLnRvU3RyaW5nKClcbiAgfVxuICAgIFxuICBcbiAgcmV0dXJuIFwid3JvbmdcIlxuICAgXG59Il0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiT2JqZWN0SWQiLCJjcnlwdG8iLCJyZXF1aXJlIiwic2hhNTEyIiwicGFzc3dvcmQiLCJzYWx0IiwiaGFzaCIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJ2YWx1ZSIsImRpZ2VzdCIsInBhc3N3b3JkSGFzaCIsImhhc2hQYXNzd29yZCIsInNhbHQyIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsIkRCIiwiREVUQUlMIiwiTUFUQ0giLCJVU0VSIiwiTE9HSU4iLCJVUkwiLCJpbnNlcnRVc2VyIiwidXNlciIsInJlc3VsdCIsImNsaWVudCIsInVzZXJDb2xsZWN0aW9uIiwiZGIiLCJjb2xsZWN0aW9uIiwiaW5zZXJ0T25lIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJjbG9zZSIsImluc2VydERldGFpbCIsImlkIiwiZGV0YWlsIiwiZGV0YWlsQ29sbGVjdGlvbiIsIl9pZCIsImNvbnRlbnQiLCJpbnNlcnRMb2dJbiIsImVtYWlsIiwicHciLCJpbnNlcnRNYXRjaCIsImFycmF5IiwibWF0Y2hDb2xsZWN0aW9uIiwibWF0Y2giLCJmaW5kTWF0Y2hVc2VycyIsInVzZXJzIiwiZmluZE9uZSIsImZpbmQiLCJmb3JFYWNoIiwicHVzaCIsIkVtYWlsRXhpc3QiLCJsb2dpbkNvbGxlY3Rpb24iLCJ2ZXJpZnlQYXNzd29yZCIsImlucHV0IiwiYWN0dWFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./library/mongodb.ts\n");

/***/ }),

/***/ "(api)/./pages/api/signup.ts":
/*!*****************************!*\
  !*** ./pages/api/signup.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var _library_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../library/mongodb */ \"(api)/./library/mongodb.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__]);\nnext_connect__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n\n\nconst handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    onError: (err, req, res, next)=>{\n        console.error(err.stack);\n        res.status(500).end(\"Something broke!\");\n    },\n    onNoMatch: (req, res)=>{\n        res.status(404).end(\"Page is not found\");\n    }\n}).post(async (req, res)=>{\n    const { email , password  } = JSON.parse(req.body);\n    if (await (0,_library_mongodb__WEBPACK_IMPORTED_MODULE_1__.EmailExist)(email)) {\n        return res.json({\n            data: \"email already exist\"\n        });\n    }\n    const result = await (0,_library_mongodb__WEBPACK_IMPORTED_MODULE_1__.insertLogIn)(email, password);\n    const id = result?.insertedId.toString();\n    const token = jwt.sign({\n        id\n    }, \"This is a Secret Key\");\n    const max_age = 60 * 60 * 3;\n    const domain = \"localhost\";\n    const path = \"/\";\n    res.setHeader(`Set-Cookie`, `token=${token};Max-Age=${max_age};Domain=${domain};Path=${path}`);\n    res.send(result);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2lnbnVwLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE1BQU1BLE1BQU1DLG1CQUFPQSxDQUFDO0FBQ1M7QUFFbUM7QUFFaEUsTUFBTUksVUFBVUgsd0RBQUVBLENBQWtDO0lBQ2hESSxTQUFTLENBQUNDLEtBQUtDLEtBQUtDLEtBQUtDLE9BQVM7UUFDaENDLFFBQVFDLEtBQUssQ0FBQ0wsSUFBSU0sS0FBSztRQUN2QkosSUFBSUssTUFBTSxDQUFDLEtBQUtDLEdBQUcsQ0FBQztJQUN0QjtJQUNBQyxXQUFXLENBQUNSLEtBQUtDLE1BQVE7UUFDdkJBLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUM7SUFDdEI7QUFDRixHQUNHRSxJQUFJLENBQUMsT0FBT1QsS0FBS0MsTUFBUTtJQUN0QixNQUFNLEVBQUNTLE1BQUssRUFBRUMsU0FBUSxFQUFDLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ2IsSUFBSWMsSUFBSTtJQUU3QyxJQUFJLE1BQU1uQiw0REFBVUEsQ0FBQ2UsUUFBUTtRQUN6QixPQUFPVCxJQUFJYyxJQUFJLENBQUM7WUFBQ0MsTUFBTTtRQUFxQjtJQUNoRCxDQUFDO0lBRUQsTUFBTUMsU0FBUyxNQUFNckIsNkRBQVdBLENBQUNjLE9BQU9DO0lBQ3hDLE1BQU1PLEtBQUtELFFBQVFFLFdBQVdDLFFBQVE7SUFFdEMsTUFBTUMsUUFBUTdCLElBQUk4QixJQUFJLENBQUM7UUFBQ0o7SUFBRSxHQUFHO0lBQzdCLE1BQU1LLFVBQVUsS0FBSyxLQUFLO0lBQzFCLE1BQU1DLFNBQVM7SUFDZixNQUFNQyxPQUFPO0lBRWJ4QixJQUFJeUIsU0FBUyxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUMsQ0FBQyxNQUFNLEVBQUVMLE1BQU0sU0FBUyxFQUFFRSxRQUFRLFFBQVEsRUFBRUMsT0FBTyxNQUFNLEVBQUVDLEtBQUssQ0FBQztJQUM1RnhCLElBQUkwQixJQUFJLENBQUNWO0FBQ2I7QUFHQSxpRUFBZXBCLE9BQU9BLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZXRmaW5kZXIvLi9wYWdlcy9hcGkvc2lnbnVwLnRzP2U2MzgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcbmltcG9ydCBuYyBmcm9tICduZXh0LWNvbm5lY3QnXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dC90eXBlcyc7XG5pbXBvcnQgeyBFbWFpbEV4aXN0LCBpbnNlcnRMb2dJbiB9IGZyb20gJy4uLy4uL2xpYnJhcnkvbW9uZ29kYic7XG5cbmNvbnN0IGhhbmRsZXIgPSBuYzxOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlPih7XG4gICAgb25FcnJvcjogKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5lbmQoXCJTb21ldGhpbmcgYnJva2UhXCIpO1xuICAgIH0sXG4gICAgb25Ob01hdGNoOiAocmVxLCByZXMpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5lbmQoXCJQYWdlIGlzIG5vdCBmb3VuZFwiKTtcbiAgICB9LFxuICB9KVxuICAgIC5wb3N0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCB7ZW1haWwsIHBhc3N3b3JkfSA9IEpTT04ucGFyc2UocmVxLmJvZHkpO1xuXG4gICAgICAgIGlmIChhd2FpdCBFbWFpbEV4aXN0KGVtYWlsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHtkYXRhIDpcImVtYWlsIGFscmVhZHkgZXhpc3RcIn0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGluc2VydExvZ0luKGVtYWlsLCBwYXNzd29yZCk7XG4gICAgICAgIGNvbnN0IGlkID0gcmVzdWx0Py5pbnNlcnRlZElkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7aWR9LCBcIlRoaXMgaXMgYSBTZWNyZXQgS2V5XCIpXG4gICAgICAgIGNvbnN0IG1heF9hZ2UgPSA2MCAqIDYwICogMztcbiAgICAgICAgY29uc3QgZG9tYWluID0gJ2xvY2FsaG9zdCdcbiAgICAgICAgY29uc3QgcGF0aCA9ICcvJ1xuXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoYFNldC1Db29raWVgLGB0b2tlbj0ke3Rva2VufTtNYXgtQWdlPSR7bWF4X2FnZX07RG9tYWluPSR7ZG9tYWlufTtQYXRoPSR7cGF0aH1gKVxuICAgICAgICByZXMuc2VuZChyZXN1bHQpXG4gICAgfSlcbiAgICAgICAgICAgIFxuXG4gICAgZXhwb3J0IGRlZmF1bHQgaGFuZGxlciJdLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwibmMiLCJFbWFpbEV4aXN0IiwiaW5zZXJ0TG9nSW4iLCJoYW5kbGVyIiwib25FcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsInN0YXR1cyIsImVuZCIsIm9uTm9NYXRjaCIsInBvc3QiLCJlbWFpbCIsInBhc3N3b3JkIiwiSlNPTiIsInBhcnNlIiwiYm9keSIsImpzb24iLCJkYXRhIiwicmVzdWx0IiwiaWQiLCJpbnNlcnRlZElkIiwidG9TdHJpbmciLCJ0b2tlbiIsInNpZ24iLCJtYXhfYWdlIiwiZG9tYWluIiwicGF0aCIsInNldEhlYWRlciIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/signup.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/signup.ts"));
module.exports = __webpack_exports__;

})();